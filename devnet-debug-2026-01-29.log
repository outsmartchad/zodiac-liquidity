================================================================================
Devnet Debug Session - 2026-01-29
================================================================================

## Goal
Debug Error 6000 (AbortedComputation) on devnet cluster 456.

## Environment
- Arcium CLI: 0.6.3
- Anchor: 0.32.1
- Solana CLI: 2.3.0
- RPC: https://devnet.helius-rpc.com (Helius)
- Wallet: 5P9MWSyYFnJc9sxsBePXbgXUHuxjuE3T9wsUUYbmuP4R
- Balance: 12.77 SOL
- Program ID (deployed): FMMVCEygM2ewq4y4fmE5UDuyfhuoz4bXmEDDeg9iFPpL
- Cluster offset: 456
- MXE Account: DQCLck1zXPxeuanTaJ9dxYUCW2daAzh5GJLpvmhY5FWv

## Step 1: Verify Infrastructure Accounts
All Arcium accounts exist on devnet:
- Cluster Account: DzaQCyfybroycrNqE5Gk7LhSbWD2qfCics6qptBFbr95 (483 bytes) ✅
- MXE Account: DQCLck1zXPxeuanTaJ9dxYUCW2daAzh5GJLpvmhY5FWv (301 bytes) ✅
- Mempool Account: Ex7BD8o8PK1y2eXDd38Jgujj93uHygrZeWXDeGAHmHtN (23096 bytes) ✅
- Executing Pool: 4mcrgNZzJwwKrE3wXMHfepT8htSBmGqBzDYPJijWooog (168 bytes) ✅
- MXE x25519 pubkey: 1f4adbb53e2cd088c3a2bb835eda299b242c609093aae0ce3731f3eeeee68b62 ✅
- Cluster authority: 89MpQDuaCHb6xWGs3qKnHacENgEX46uW7JLfK6TGQZX

## Step 2: Verify Circuit URLs Accessibility
- init_vault (https://files.catbox.moe/aetojl.arcis): HTTP 200 ✅
- init_user_position (https://files.catbox.moe/efmtvn.arcis): HTTP 200 ✅
- deposit (https://files.catbox.moe/he0gzr.arcis): HTTP 200 ✅

## Step 3: Check Execpool
Execpool contains 1 stuck computation:
- Computation offset: 18120582616809668551
- Computation account: 9XncGzCYJaE47C7FJP8rHFwyfPZBM3oLcPVRERwqgLGT

## Step 4: Analyze Failed Callback Transactions
Both failed callback txs are for InitUserPositionCallback:

TX 5jknesSopzFAd7zRKfuaj1WZhAqZ76vwTwAVtNWDve7BiXLvdaa9jDESKyukJkhsKyxT4TpFtZDDsK7sbA2BL7Wc:
  Slot: 438279266 (2026-01-28T12:24:33-05:00)
  Status: FAILED - InstructionError [1, Custom(6000)]
  Logs:
    - Arcium CallbackComputation: SUCCESS (33620 CU)
    - zodiac_liquidity InitUserPositionCallback: FAILED
    - "AnchorError occurred. Error Code: AbortedComputation. Error Number: 6000."

TX 381UREuDHqiZa3ZUqWU1jS4Tz3dSUdZZU2eGq6683vwFiyMtViKXRVSZAz53369NeWeXpmA5bTXiac2nWQaLLNTd:
  Status: FAILED - InstructionError [1, Custom(6000)]
  Same logs as above.

TX 5NmDMNwFybpG63rDW9PfaY7SEfcjkxHofpoz1J3yUwzuFHwanWXmRD15frDP2zv5tCtuTyxYMTcE1ZNTJmAM8AQJ:
  Status: SUCCESS (Create Vault - queued computation OK)

## Step 5: Root Cause Analysis
The flow is:
1. User queues computation -> SUCCESS
2. ARX cluster picks up computation and executes MPC
3. ARX sends callback transaction to Arcium program -> SUCCESS
4. Arcium program calls our callback (InitUserPositionCallback)
5. Our callback calls output.verify_output() -> FAILS -> Error 6000

verify_output() failing means the MPC computation returned an aborted/invalid result.
The ARX nodes ARE responding (callbacks arrive), but the computation itself aborted.

## Step 6: Check ARX Node Status
Checked node offsets 456-459: ALL AccountNotFound
The individual ARX node accounts don't exist at those offsets.
This does NOT necessarily mean nodes are down - node offsets != cluster offset.

## Step 7: Fee Proposals
arcium fee-proposals 456 -u d -> [1] (only 1 proposal, seems minimal)

## Key Finding
The ARX nodes are alive (they submit callback txs), but the MPC computation output
fails verification. This suggests:
- Circuit execution aborted during MPC (e.g., nodes couldn't fetch/verify circuit)
- OR the circuit format is incompatible with the cluster's expected version

## Next Steps to Try
1. Fresh deploy with new program keypair (clean slate)
2. Check if circuits need rebuild with latest arcium build
3. Try a minimal test (simplest circuit) to isolate the issue
4. Check Arcium Discord for known cluster 456 issues

================================================================================
Error: Anchor CLI not installed. Visit: https://www.anchor-lang.com/docs/installation#install-anchor-cli
=== Checking Docker === echo No zodiac Docker images found. Need to build. echo  echo === Building Docker image === docker build -t zodiac-liquidity-dev .
Syncing program keys... (use --skip-keys-sync to skip)
Clean completed successfully!
Syncing program ids for the configured cluster (localnet)

All program id declarations are synced.
Checking if encrypted instructions are up to date.
Encrypted instructions are up to date. Skipping build.
    Updating crates.io index
 Downloading crates ...
  Downloaded anchor-attribute-constant v0.32.1
  Downloaded anchor-lang-idl-spec v0.1.0
  Downloaded solana-secp256k1-recover v2.2.1
  Downloaded thiserror-impl v2.0.18
  Downloaded rand_chacha v0.2.2
  Downloaded solana-fee-calculator v2.2.1
  Downloaded serde_bytes v0.11.19
  Downloaded rand_chacha v0.3.1
  Downloaded solana-program-entrypoint v2.3.0
  Downloaded solana-program-error v2.2.2
  Downloaded solana-loader-v2-interface v2.2.1
  Downloaded solana-message v2.4.0
  Downloaded solana-loader-v3-interface v3.0.0
  Downloaded hashbrown v0.16.1
  Downloaded merlin v3.0.0
  Downloaded num-iter v0.1.45
  Downloaded num-integer v0.1.46
  Downloaded solana-invoke v0.4.0
  Downloaded serde_core v1.0.228
  Downloaded tinyvec v1.10.0
  Downloaded toml v0.5.11
  Downloaded memchr v2.7.6
  Downloaded num-bigint v0.4.6
  Downloaded itertools v0.10.5
  Downloaded itertools v0.13.0
  Downloaded syn v2.0.114
  Downloaded indexmap v2.13.0
  Downloaded unicode-segmentation v1.12.0
  Downloaded num-modular v0.6.1
  Downloaded zerocopy v0.8.34
  Downloaded libsecp256k1-core v0.2.2
  Downloaded keccak-const v0.2.0
  Downloaded zmij v1.0.17
  Downloaded toml_datetime v0.7.5+spec-1.1.0
  Downloaded sha3 v0.10.8
  Downloaded thiserror-impl v1.0.69
  Downloaded thiserror v2.0.18
  Downloaded subtle v2.6.1
  Downloaded spl-type-length-value v0.8.0
  Downloaded num-derive v0.4.2
  Downloaded num-complex v0.4.6
  Downloaded num v0.4.3
  Downloaded memoffset v0.9.1
  Downloaded libsecp256k1-gen-genmult v0.2.1
  Downloaded libsecp256k1-gen-ecmult v0.2.1
  Downloaded libsecp256k1 v0.6.0
  Downloaded keccak v0.1.5
  Downloaded itoa v1.0.17
  Downloaded zeroize_derive v1.4.3
  Downloaded version_check v0.9.5
  Downloaded tinyvec_macros v0.1.1
  Downloaded syn v1.0.109
  Downloaded static_assertions v1.1.0
  Downloaded lazy_static v1.5.0
  Downloaded itertools v0.12.1
  Downloaded inout v0.1.4
  Downloaded heck v0.3.3
  Downloaded getrandom v0.2.17
  Downloaded uriparse v0.6.4
  Downloaded typenum v1.19.0
  Downloaded libc v0.2.180
  Downloaded thiserror v1.0.69
  Downloaded spl-pod v0.5.1
  Downloaded spl-memo v6.0.0
  Downloaded spl-elgamal-registry v0.2.0
  Downloaded spl-discriminator v0.4.1
  Downloaded spl-associated-token-account v7.0.0
  Downloaded solana-vote-interface v2.2.6
  Downloaded solana-transaction-error v2.2.1
  Downloaded log v0.4.29
  Downloaded hmac v0.12.1
  Downloaded hashbrown v0.15.2
  Downloaded zeroize v1.8.2
  Downloaded universal-hash v0.5.1
  Downloaded unicode-ident v1.0.22
  Downloaded toml_parser v1.0.6+spec-1.1.0
  Downloaded toml_edit v0.23.10+spec-1.0.0
  Downloaded spl-token-2022 v8.0.1
  Downloaded spl-discriminator-derive v0.2.0
  Downloaded hashbrown v0.13.2
  Downloaded spl-token-confidential-transfer-proof-extraction v0.3.0
  Downloaded spl-program-error-derive v0.5.0
  Downloaded spl-discriminator-syn v0.2.1
  Downloaded spl-associated-token-account-client v2.0.0
  Downloaded solana-sha256-hasher v2.3.0
  Downloaded sha2 v0.9.9
  Downloaded winnow v0.7.14
  Downloaded solana-keccak-hasher v2.2.1
  Downloaded solana-derivation-path v2.2.1
  Downloaded solana-stake-interface v1.2.1
  Downloaded solana-stable-layout v2.2.1
  Downloaded solana-slot-history v2.2.1
  Downloaded solana-signer v2.2.1
  Downloaded solana-instructions-sysvar v2.2.2
  Downloaded solana-alt-bn128-bls v0.1.0
  Downloaded solana-account v2.2.1
  Downloaded spl-token-metadata-interface v0.7.0
  Downloaded spl-token-group-interface v0.6.0
  Downloaded spl-token-confidential-transfer-ciphertext-arithmetic v0.3.1
  Downloaded spl-token v8.0.0
  Downloaded solana-signature v2.3.0
  Downloaded solana-program v2.3.0
  Downloaded solana-nonce v2.2.1
  Downloaded solana-native-token v2.3.0
  Downloaded solana-instruction v2.3.3
  Downloaded solana-epoch-schedule v2.2.1
  Downloaded solana-define-syscall v2.3.0
  Downloaded solana-curve25519 v2.3.13
  Downloaded solana-cpi v2.2.1
  Downloaded solana-borsh v2.2.1
  Downloaded solana-bincode v2.2.1
  Downloaded solana-address-lookup-table-interface v2.2.2
  Downloaded solana-account-info v2.3.0
  Downloaded shlex v1.3.0
  Downloaded sha2 v0.10.9
  Downloaded serde_json v1.0.149
  Downloaded serde v1.0.228
  Downloaded spl-tlv-account-resolution v0.10.0
  Downloaded spl-program-error v0.7.0
  Downloaded solana-sysvar-id v2.2.1
  Downloaded solana-sysvar v2.3.0
  Downloaded solana-slot-hashes v2.2.1
  Downloaded solana-seed-derivable v2.2.1
  Downloaded solana-msg v2.2.1
  Downloaded solana-loader-v4-interface v2.2.1
  Downloaded solana-loader-v3-interface v5.0.0
  Downloaded solana-last-restart-slot v2.2.1
  Downloaded solana-hash v2.3.0
  Downloaded solana-feature-gate-interface v2.2.2
  Downloaded solana-example-mocks v2.2.1
  Downloaded solana-epoch-rewards v2.2.1
  Downloaded solana-clock v2.2.2
  Downloaded solana-bn254 v2.2.2
  Downloaded solana-blake3-hasher v2.2.1
  Downloaded solana-big-mod-exp v2.2.1
  Downloaded solana-atomic-u64 v2.2.1
  Downloaded serde_derive v1.0.228
  Downloaded semver v1.0.27
  Downloaded rustversion v1.0.22
  Downloaded rustc_version v0.4.1
  Downloaded rand_core v0.5.1
  Downloaded sha2-const-stable v0.1.0
  Downloaded solana-decode-error v2.3.0
  Downloaded rand v0.8.5
  Downloaded qstring v0.7.2
  Downloaded proc-macro-crate v0.1.5
  Downloaded solana-zk-sdk v2.3.13
  Downloaded spl-token-confidential-transfer-proof-generation v0.4.1
  Downloaded solana-serialize-utils v2.2.1
  Downloaded solana-sdk-ids v2.2.1
  Downloaded proc-macro2 v1.0.106
  Downloaded solana-security-txt v1.1.2
  Downloaded rand v0.7.3
  Downloaded polyval v0.6.2
  Downloaded num_enum v0.7.5
  Downloaded getrandom v0.1.16
  Downloaded rand_core v0.6.4
  Downloaded ppv-lite86 v0.2.21
  Downloaded percent-encoding v2.3.2
  Downloaded pbkdf2 v0.11.0
  Downloaded num-traits v0.2.19
  Downloaded num-rational v0.4.2
  Downloaded solana-seed-phrase v2.2.1
  Downloaded quote v1.0.44
  Downloaded proc-macro-crate v3.4.0
  Downloaded paste v1.0.15
  Downloaded opaque-debug v0.3.1
  Downloaded once_cell v1.21.3
  Downloaded num_enum_derive v0.7.5
  Downloaded num-order v1.2.0
  Downloaded spl-transfer-hook-interface v0.10.0
  Downloaded solana-system-interface v1.0.0
  Downloaded solana-short-vec v2.2.1
  Downloaded solana-serde-varint v2.2.2
  Downloaded solana-pubkey v2.4.0
  Downloaded dashu-ratio v0.4.1
  Downloaded dashu-int v0.4.1
  Downloaded dashu-float v0.4.3
  Downloaded curve25519-dalek v4.1.3
  Downloaded cc v1.2.54
  Downloaded bytemuck v1.24.0
  Downloaded borsh v1.6.0
  Downloaded blake3 v1.8.2
  Downloaded base64 v0.22.1
  Downloaded base64 v0.21.7
  Downloaded base64 v0.12.3
  Downloaded ark-poly v0.5.0
  Downloaded ark-ff v0.5.0
  Downloaded ark-ff v0.4.2
  Downloaded ark-ec v0.5.0
  Downloaded ark-ec v0.4.2
  Downloaded arcium-client v0.6.3
  Downloaded anyhow v1.0.100
  Downloaded anchor-syn v0.32.1
  Downloaded aes v0.8.4
  Downloaded solana-sdk-macro v2.2.1
  Downloaded solana-sanitize v2.2.1
  Downloaded solana-rent v2.2.1
  Downloaded solana-program-pack v2.2.1
  Downloaded solana-program-option v2.2.1
  Downloaded solana-program-memory v2.3.1
  Downloaded solana-nostd-sha256 v0.1.3
  Downloaded foldhash v0.1.5
  Downloaded five8 v0.2.1
  Downloaded find-msvc-tools v0.1.8
  Downloaded feature-probe v0.1.1
  Downloaded either v1.15.0
  Downloaded educe v0.6.0
  Downloaded digest v0.10.7
  Downloaded derivative v2.2.0
  Downloaded dashu-base v0.4.1
  Downloaded ctr v0.9.2
  Downloaded crypto-common v0.1.7
  Downloaded crunchy v0.2.4
  Downloaded convert_case v0.8.0
  Downloaded constant_time_eq v0.3.1
  Downloaded const-crypto v0.3.0
  Downloaded cipher v0.4.4
  Downloaded byteorder v1.5.0
  Downloaded bytemuck_derive v1.10.2
  Downloaded bv v0.11.1
  Downloaded bs58 v0.5.1
  Downloaded borsh-derive-internal v0.10.4
  Downloaded borsh-derive v1.6.0
  Downloaded borsh-derive v0.10.4
  Downloaded borsh v0.10.4
  Downloaded block-buffer v0.10.4
  Downloaded bitflags v2.10.0
  Downloaded bincode v1.3.3
  Downloaded autocfg v1.5.0
  Downloaded arrayvec v0.7.6
  Downloaded ark-std v0.5.0
  Downloaded ark-std v0.4.0
  Downloaded ark-serialize-derive v0.5.0
  Downloaded ark-serialize v0.5.0
  Downloaded ark-poly v0.4.2
  Downloaded ark-ff-macros v0.5.0
  Downloaded ark-ff-macros v0.4.2
  Downloaded ark-ff-asm v0.5.0
  Downloaded ark-bn254 v0.5.0
  Downloaded ark-bn254 v0.4.0
  Downloaded arcium-anchor v0.6.3
  Downloaded anchor-spl v0.32.1
  Downloaded anchor-lang v0.32.1
  Downloaded anchor-attribute-program v0.32.1
  Downloaded anchor-attribute-event v0.32.1
  Downloaded allocator-api2 v0.2.21
  Downloaded ahash v0.8.12
  Downloaded generic-array v0.14.7
  Downloaded fnv v1.0.7
  Downloaded five8_core v0.1.2
  Downloaded five8_const v0.1.4
  Downloaded equivalent v1.0.2
  Downloaded enum-ordinalize-derive v4.3.2
  Downloaded enum-ordinalize v4.3.2
  Downloaded digest v0.9.0
  Downloaded derivation-path v0.2.0
  Downloaded dashu-macros v0.4.1
  Downloaded dashu v0.4.2
  Downloaded curve25519-dalek-derive v0.1.1
  Downloaded cpufeatures v0.2.17
  Downloaded cfg_aliases v0.2.1
  Downloaded cfg-if v1.0.4
  Downloaded borsh-schema-derive-internal v0.10.4
  Downloaded block-buffer v0.9.0
  Downloaded arrayref v0.3.9
  Downloaded ark-serialize-derive v0.4.2
  Downloaded ark-serialize v0.4.2
  Downloaded ark-ff-asm v0.4.2
  Downloaded arcium-macros v0.6.3
  Downloaded arcis-interface v0.6.3
  Downloaded anchor-lang-idl v0.1.2
  Downloaded anchor-derive-space v0.32.1
  Downloaded anchor-derive-accounts v0.32.1
  Downloaded anchor-attribute-error v0.32.1
  Downloaded aes-gcm-siv v0.11.1
  Downloaded anchor-derive-serde v0.32.1
  Downloaded anchor-attribute-account v0.32.1
  Downloaded anchor-attribute-access-control v0.32.1
  Downloaded aead v0.5.2
Error: Function _ZN109_$LT$arcium_client..idl..arcium..utils..Account$u20$as$u20$core..convert..TryFrom$LT$$RF$$u5b$u8$u5d$$GT$$GT$8try_from17ha037aaf1519dcf38E Stack offset of 721512 exceeded max offset of 4096 by 717416 bytes, please minimize large stack variables. Estimated function frame size: 721536 bytes. Exceeding the maximum stack offset may cause undefined behavior during execution.

warning: constant `COMP_DEF_OFFSET_CLEAR_POSITION` is never used
  --> programs/zodiac_liquidity/src/lib.rs:39:7
   |
39 | const COMP_DEF_OFFSET_CLEAR_POSITION: u32 = comp_def_offset("clear_position");
   |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` on by default

warning: `zodiac_liquidity` (lib) generated 1 warning
    Finished `release` profile [optimized] target(s) in 6.89s
 Downloading crates ...
  Downloaded toml_write v0.1.2
  Downloaded toml_datetime v0.6.11
  Downloaded serde_spanned v0.6.9
  Downloaded toml v0.8.23
  Downloaded cargo_toml v0.19.2
  Downloaded regex-automata v0.4.13
  Downloaded regex v1.12.2
  Downloaded aho-corasick v1.1.4
  Downloaded toml_edit v0.22.27
  Downloaded regex-syntax v0.8.8
    Finished `test` profile [unoptimized + debuginfo] target(s) in 1.14s
     Running unittests src/lib.rs (/app/target/debug/deps/zodiac_liquidity-dfd1186b3ff6587a)

================================================================================
Step 8: Docker Container Setup
================================================================================
- Built zodiac-liquidity-dev image (Ubuntu 24.04, GLIBC 2.39)
- Container zodiac-dev running
- arcium build: SUCCESS (circuits up to date, program compiled)
- Known warning: Stack offset exceeded (SBF/BPF, non-fatal)

================================================================================
Step 9: Run Devnet Test
================================================================================
Syncing program keys... (use --skip-keys-sync to skip)
Clean completed successfully!
Syncing program ids for the configured cluster (localnet)

All program id declarations are synced.
Checking if encrypted instructions are up to date.
Encrypted instructions are up to date. Skipping build.
Error: Function _ZN109_$LT$arcium_client..idl..arcium..utils..Account$u20$as$u20$core..convert..TryFrom$LT$$RF$$u5b$u8$u5d$$GT$$GT$8try_from17ha037aaf1519dcf38E Stack offset of 721512 exceeded max offset of 4096 by 717416 bytes, please minimize large stack variables. Estimated function frame size: 721536 bytes. Exceeding the maximum stack offset may cause undefined behavior during execution.

warning: constant `COMP_DEF_OFFSET_CLEAR_POSITION` is never used
  --> programs/zodiac_liquidity/src/lib.rs:39:7
   |
39 | const COMP_DEF_OFFSET_CLEAR_POSITION: u32 = comp_def_offset("clear_position");
   |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` on by default

warning: `zodiac_liquidity` (lib) generated 1 warning
    Finished `release` profile [optimized] target(s) in 0.56s
    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.29s
     Running unittests src/lib.rs (/app/target/debug/deps/zodiac_liquidity-dfd1186b3ff6587a)
Running tests against devnet cluster (offset: 456)
Starting anchor test against devnet cluster...

Found a 'test' script in the Anchor.toml. Running it as a test suite!

Running test suite: "/app/Anchor.toml"

yarn run v1.22.22
$ /app/node_modules/.bin/ts-mocha -p ./tsconfig.json -t 1000000 'tests/**/*.ts'


  zodiac-liquidity
============================================================
Zodiac Liquidity Tests - Setup
============================================================
Program ID: FMMVCEygM2ewq4y4fmE5UDuyfhuoz4bXmEDDeg9iFPpL
Owner: 5P9MWSyYFnJc9sxsBePXbgXUHuxjuE3T9wsUUYbmuP4R
MXE x25519 pubkey: 1f4adbb53e2cd088c3a2bb835eda299b242c609093aae0ce3731f3eeeee68b62
Encryption cipher initialized
Creating test token mint...
Token mint: CrPWTt6BVPdXjdHib2aYK5D7QUTWqSsRzscC632j2f8K
Vault PDA: 3poB1RvSSF69b7Ninrg2piPSk4a9DzHCX3xJHS2eDcf5
User Position PDA: Bj4r7N8wqqXM5AW8w8DoFC1mmmrPdeAqsXegqyvd1A1d
    Computation Definition Initialization
init_vault comp def PDA: EJX8W6xXyJVW3Cgs2C3mZabYaLqKkfW1FVMZeJvjyezp
init_vault comp def already exists (141 bytes), skipping
Init vault comp def tx: skipped
      ✔ initializes init_vault computation definition (249ms)
init_user_position comp def PDA: AtDdpxywFm79JA9eQ91ZqKamqVuz1n6xDJFJyNEEfKme
init_user_position comp def already exists (140 bytes), skipping
Init user position comp def tx: skipped
      ✔ initializes init_user_position computation definition (212ms)
deposit comp def PDA: 8SHqgCFcFEP8nuHtFsvMieS98sNRNr3qPUDpJLXjL4Xu
deposit comp def already exists (153 bytes), skipping
Init deposit comp def tx: skipped
      ✔ initializes deposit computation definition (213ms)
reveal_pending_deposits comp def PDA: FBv7CfhRZNc88Apht6Wbk13wkCd6oHy6pptjq89bsGuM
reveal_pending_deposits comp def already exists (141 bytes), skipping
Init reveal pending comp def tx: skipped
      ✔ initializes reveal_pending_deposits computation definition (212ms)
record_lp_tokens comp def PDA: ENBEG9vzNebBoFsP5gcDP8r8v34dAkPwgL5eRHjFZseJ
record_lp_tokens comp def already exists (145 bytes), skipping
Init record LP comp def tx: skipped
      ✔ initializes record_lp_tokens computation definition (212ms)
compute_withdrawal comp def PDA: 7BPHyvom64mXLLGFb8vC3Cn6YvjkwYB2n6oUpP21HdZk
compute_withdrawal comp def already exists (144 bytes), skipping
Init withdraw comp def tx: skipped
      ✔ initializes compute_withdrawal computation definition (212ms)
get_user_position comp def PDA: 2ZPcL5aKHW7eRjmNjvbNLRNtMpCkGcgLfg5Gpz4YfTBk
get_user_position comp def already exists (145 bytes), skipping
Init get position comp def tx: skipped
      ✔ initializes get_user_position computation definition (211ms)
    Vault Creation
Create vault tx: 47Mf7JJ8iuC8uJhtuWn4N2b2wPTsRixarLL39zb7x2SLG4QSmRaBvRgcMs2faDYZFxS5h7wwHywd66KA3peoSFsG

================================================================================
Step 10: Examples Analysis
================================================================================
Explored ALL 8 Arcium examples in /root/examples/:
- voting, coinflip, blackjack, ed25519, sealed_bid_auction, 
  rock_paper_scissors (against-player & against-house), share_medical_records

KEY FINDINGS:
- ALL examples are localnet-only (no devnet cluster 456 config)
- ALL use identical verify_output + AbortedComputation error pattern
- NO retry logic for AbortedComputation in any example
- Examples use init_comp_def(ctx.accounts, None, None) (localnet auto-uploads)
- Our OffChain circuit source approach is correct for devnet
- All patterns match - our code structure is correct

================================================================================
Step 11: Arcium Docs Analysis
================================================================================
- Deployment docs confirm cluster 456 is v0.6.3 (recommended)
- v0.5 -> v0.6 migration: program ID changed, ArciumSignerAccount rename, 
  clock_account needs mut (ALL already applied in our code)
- Limitations docs: only mentions output size constraint
- No documented troubleshooting for AbortedComputation
- No known issues documented for cluster 456

================================================================================
Step 12: Current Devnet Test (2026-01-29)
================================================================================
Running arcium test --cluster devnet...
- Comp defs: ALL 7 skipped (already exist) ✅
- Create vault tx: 47Mf7JJ8iuC8uJhtuWn4N2b2wPTsRixarLL39zb7x2SLG4QSmRaBvRgcMs2faDYZFxS5h7wwHywd66KA3peoSFsG
- Status: HANGING - waiting for vault callback (no callback received)
- This is worse than yesterday: yesterday callbacks arrived (but aborted),
  today no callbacks at all

DIAGNOSIS: Cluster 456 ARX nodes appear degraded or down:
- Yesterday: Nodes responded with aborted computations
- Today: Nodes not responding at all (no callback received)
- Stuck computation in execpool: offset 18120582616809668551

================================================================================
Step 13: Fresh Deploy Strategy
================================================================================
Since cluster 456 appears unhealthy, trying:
1. Clean rebuild of circuits
2. Generate new program keypair
3. Fresh deploy to devnet
4. Fresh MXE initialization
5. Fresh comp def initialization
6. Re-upload circuits to new URLs
7. Test

Clean completed successfully!
Syncing program keys... (use --skip-keys-sync to skip)
No artifacts directory found. Nothing to clean.
Syncing program ids for the configured cluster (localnet)

All program id declarations are synced.
Checking if encrypted instructions are up to date.
     Removed 0 files
   Compiling proc-macro2 v1.0.106
   Compiling quote v1.0.44
   Compiling unicode-ident v1.0.22
   Compiling libc v0.2.180
   Compiling cfg-if v1.0.4
   Compiling serde_core v1.0.228
   Compiling autocfg v1.5.0
   Compiling typenum v1.19.0
   Compiling serde v1.0.228
   Compiling version_check v0.9.5
   Compiling generic-array v0.14.7
   Compiling subtle v2.6.1
   Compiling memchr v2.7.6
   Compiling num-traits v0.2.19
   Compiling zerocopy v0.8.34
   Compiling itoa v1.0.17
   Compiling find-msvc-tools v0.1.8
   Compiling shlex v1.3.0
   Compiling syn v2.0.114
   Compiling cc v1.2.54
   Compiling fnv v1.0.7
   Compiling num-bigint v0.3.3
   Compiling getrandom v0.2.17
   Compiling num-integer v0.1.46
   Compiling block-buffer v0.10.4
   Compiling rand_core v0.6.4
   Compiling syn v1.0.109
   Compiling crypto-common v0.1.7
   Compiling radium v0.7.0
   Compiling digest v0.10.7
   Compiling time-core v0.1.8
   Compiling powerfmt v0.2.0
   Compiling num-conv v0.2.0
   Compiling time-macros v0.2.26
   Compiling deranged v0.5.5
   Compiling semver v1.0.27
   Compiling untrusted v0.9.0
   Compiling ring v0.17.14
   Compiling thiserror v1.0.69
   Compiling tap v1.0.1
   Compiling cpufeatures v0.2.17
   Compiling minimal-lexical v0.2.1
   Compiling addchain v0.2.0
   Compiling ppv-lite86 v0.2.21
   Compiling nom v7.1.3
   Compiling wyz v0.5.1
   Compiling rustc_version v0.4.1
   Compiling time v0.3.46
   Compiling lazy_static v1.5.0
   Compiling funty v2.0.0
   Compiling thiserror v2.0.18
   Compiling byteorder v1.5.0
   Compiling zmij v1.0.17
   Compiling bitvec v1.0.1
   Compiling pin-project-lite v0.2.16
   Compiling getrandom v0.3.4
   Compiling strsim v0.11.1
   Compiling rusticata-macros v4.1.0
   Compiling ident_case v1.0.1
   Compiling synstructure v0.13.2
   Compiling darling_core v0.21.3
   Compiling once_cell v1.21.3
   Compiling either v1.15.0
   Compiling inout v0.1.4
   Compiling oid-registry v0.7.1
   Compiling crossbeam-utils v0.8.21
   Compiling cfg_aliases v0.2.1
   Compiling const-oid v0.10.2
   Compiling five8_core v0.1.2
   Compiling cipher v0.4.4
   Compiling rand_core v0.9.5
   Compiling curve25519-dalek v4.1.3
   Compiling const-oid v0.9.6
   Compiling keccak v0.1.5
   Compiling libm v0.2.16
   Compiling base16ct v0.2.0
   Compiling base64 v0.22.1
   Compiling log v0.4.29
   Compiling slab v0.4.11
   Compiling rustls v0.23.36
   Compiling rand_chacha v0.9.0
   Compiling zeroize_derive v1.4.3
   Compiling serde_derive v1.0.228
   Compiling thiserror-impl v1.0.69
   Compiling ff_derive v0.13.1
   Compiling asn1-rs-derive v0.5.1
   Compiling bytemuck_derive v1.10.2
   Compiling zeroize v1.8.2
   Compiling rustls-pki-types v1.14.0
   Compiling asn1-rs-impl v0.2.0
   Compiling displaydoc v0.2.5
   Compiling thiserror-impl v2.0.18
   Compiling ff v0.13.1
   Compiling darling_macro v0.21.3
   Compiling der v0.8.0-rc.1
   Compiling group v0.13.0
   Compiling curve25519-dalek-derive v0.1.1
   Compiling rustls-webpki v0.103.9
   Compiling bytemuck v1.24.0
   Compiling darling v0.21.3
   Compiling der v0.7.10
   Compiling asn1-rs v0.6.2
   Compiling five8 v0.2.1
   Compiling tracing-core v0.1.36
   Compiling sha2 v0.10.9
   Compiling openssl-probe v0.2.1
   Compiling futures-sink v0.3.31
   Compiling data-encoding v2.10.0
   Compiling solana-sanitize v2.2.1
   Compiling futures-core v0.3.31
   Compiling rustls-native-certs v0.8.3
   Compiling futures-channel v0.3.31
   Compiling tracing v0.1.44
   Compiling spki v0.7.3
   Compiling crossbeam-epoch v0.9.18
   Compiling spki v0.8.0-rc.1
   Compiling merlin v3.0.0
   Compiling rand v0.9.2
   Compiling futures-macro v0.3.31
   Compiling aes v0.8.4
   Compiling rand_chacha v0.3.1
   Compiling hybrid-array v0.2.3
   Compiling serdect v0.3.0-rc.0
   Compiling rand v0.8.5
   Compiling five8_const v0.1.4
   Compiling quinn-udp v0.5.14
   Compiling block-buffer v0.11.0-rc.3
   Compiling crypto-common v0.2.0-rc.1
   Compiling itertools v0.12.1
   Compiling solana-decode-error v2.3.0
   Compiling socket2 v0.6.2
   Compiling wincode v0.2.5
   Compiling futures-task v0.3.31
   Compiling futures-io v0.3.31
   Compiling rayon-core v1.13.0
   Compiling solana-atomic-u64 v2.2.1
   Compiling bytes v1.11.0
   Compiling rustc-hash v2.1.1
   Compiling pin-utils v0.1.0
   Compiling tinyvec_macros v0.1.1
   Compiling siphasher v1.0.2
   Compiling futures-util v0.3.31
   Compiling tinyvec v1.10.0
   Compiling fastbloom v0.14.1
   Compiling solana-pubkey v2.4.0
   Compiling digest v0.11.0-pre.9
   Compiling crypto-bigint v0.6.0-rc.6
   Compiling sec1 v0.8.0-rc.3
   Compiling bincode v1.3.3
   Compiling crossbeam-deque v0.8.6
   Compiling pkcs8 v0.11.0-rc.1
   Compiling pkcs8 v0.10.2
   Compiling wincode-derive v0.2.3
   Compiling pem v3.0.6
   Compiling tokio-macros v2.6.0
   Compiling sha3 v0.10.8
   Compiling quinn v0.11.9
   Compiling rustls-platform-verifier v0.6.2
   Compiling yasna v0.5.2
   Compiling curve25519-dalek-arcium-fork v4.1.8
   Compiling blake3 v1.8.2
   Compiling signature v2.2.0
   Compiling mio v1.1.1
   Compiling unicode-xid v0.2.6
   Compiling lru-slab v0.1.2
   Compiling serde_json v1.0.149
   Compiling quinn-proto v0.11.13
   Compiling tokio v1.49.0
   Compiling derive_more-impl v1.0.0
   Compiling ed25519 v2.2.3
   Compiling elliptic-curve v0.14.0-rc.1
   Compiling futures-executor v0.3.31
   Compiling serde_with_macros v3.16.1
   Compiling itertools v0.10.5
   Compiling constant_time_eq v0.3.1
   Compiling percent-encoding v2.3.2
   Compiling arrayref v0.3.9
   Compiling arrayvec v0.7.6
   Compiling qstring v0.7.2
   Compiling rayon v1.11.0
   Compiling futures v0.3.31
   Compiling ed25519-dalek v2.2.0
   Compiling serde_with v3.16.1
   Compiling ambassador v0.4.2
   Compiling derive_more v1.0.0
   Compiling mpc-macros v0.3.1
   Compiling solana-instruction v2.3.3
   Compiling num-bigint v0.4.6
   Compiling blanket v0.4.0
   Compiling uriparse v0.6.4
   Compiling serde_bytes v0.11.19
   Compiling universal-hash v0.5.1
   Compiling static_assertions v1.1.0
   Compiling opaque-debug v0.3.1
   Compiling derivation-path v0.2.0
   Compiling hashbrown v0.16.1
   Compiling hex v0.4.3
   Compiling itybity v0.3.1
   Compiling equivalent v1.0.2
   Compiling der-parser v9.0.0
   Compiling solana-derivation-path v2.2.1
   Compiling polyval v0.6.2
   Compiling solana-transaction-error v2.2.1
   Compiling solana-signature v2.3.0
   Compiling ctr v0.9.2
   Compiling pbkdf2 v0.11.0
   Compiling hmac v0.12.1
   Compiling aead v0.5.2
   Compiling heck v0.4.1
   Compiling aes-gcm-siv v0.11.1
   Compiling solana-seed-phrase v2.2.1
   Compiling solana-signer v2.2.1
   Compiling indexmap v2.13.0
   Compiling x509-parser v0.16.0
   Compiling enum-try-as-inner v0.1.1
   Compiling solana-seed-derivable v2.2.1
   Compiling solana-sdk-ids v2.2.1
   Compiling num-derive v0.4.2
   Compiling paste v1.0.15
   Compiling csv-core v0.1.13
   Compiling ryu v1.0.22
   Compiling camino v1.2.2
   Compiling csv v1.4.0
   Compiling arcis-internal-expr-macro v0.6.3
   Compiling rand_seeder v0.3.0
   Compiling rcgen v0.13.2
   Compiling solana-zk-sdk v2.3.13
   Compiling arcis-interface v0.6.3
   Compiling arcium-primitives v0.3.0
   Compiling cargo-platform v0.1.9
   Compiling cargo_metadata v0.19.2
   Compiling arcium-core-utils v0.3.0
   Compiling arcis-compiler v0.6.3
   Compiling arcis-interpreter v0.6.3
   Compiling arcis-interpreter-proc-macros v0.6.3
   Compiling arcis v0.6.3
   Compiling encrypted-ixs v0.1.0 (/app/encrypted-ixs)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 1m 03s
Built encrypted instruction weighing    577997128 ACUs, from build/deposit.arcis.ir. 
Built encrypted instruction weighing    492906552 ACUs, from build/get_user_position.arcis.ir. 
Built encrypted instruction weighing    240959768 ACUs, from build/clear_position.arcis.ir. 
Warning: arcis compiler detected that the value of input `vault_state.data.data[1]` is unused or could be optimized out.
Warning: arcis compiler detected that the value of input `vault_state.data.data[2]` is unused or could be optimized out.
Built encrypted instruction weighing    152529520 ACUs, from build/reveal_pending_deposits.arcis.ir. 
Built encrypted instruction weighing    150963552 ACUs, from build/init_user_position.arcis.ir. 
Built encrypted instruction weighing    150985824 ACUs, from build/init_vault.arcis.ir. 
Warning: arcis compiler detected that the value of input `user_position.data.data[1]` is unused or could be optimized out.
Built encrypted instruction weighing    488023696 ACUs, from build/compute_withdrawal.arcis.ir. 
Warning: arcis compiler detected that the value of input `vault_state.data.data[0]` is unused or could be optimized out.
Built encrypted instruction weighing    193799040 ACUs, from build/record_lp_tokens.arcis.ir. 
   Compiling proc-macro2 v1.0.106
   Compiling unicode-ident v1.0.22
   Compiling quote v1.0.44
   Compiling version_check v0.9.5
   Compiling typenum v1.19.0
   Compiling serde_core v1.0.228
   Compiling serde v1.0.228
   Compiling syn v1.0.109
   Compiling cfg-if v1.0.4
   Compiling autocfg v1.5.0
   Compiling equivalent v1.0.2
   Compiling winnow v0.7.14
   Compiling hashbrown v0.16.1
   Compiling generic-array v0.14.7
   Compiling toml_datetime v0.7.5+spec-1.1.0
   Compiling solana-define-syscall v2.3.0
   Compiling num-traits v0.2.19
   Compiling syn v2.0.114
   Compiling indexmap v2.13.0
   Compiling toml_parser v1.0.6+spec-1.1.0
   Compiling cfg_aliases v0.2.1
   Compiling subtle v2.6.1
   Compiling borsh v1.6.0
   Compiling block-buffer v0.10.4
   Compiling toml_edit v0.23.10+spec-1.0.0
   Compiling crypto-common v0.1.7
   Compiling zmij v1.0.17
   Compiling once_cell v1.21.3
   Compiling digest v0.10.7
   Compiling zerocopy v0.8.34
   Compiling five8_core v0.1.2
   Compiling ahash v0.8.12
   Compiling serde_json v1.0.149
   Compiling proc-macro-crate v3.4.0
   Compiling five8 v0.2.1
   Compiling solana-sanitize v2.2.1
   Compiling solana-atomic-u64 v2.2.1
   Compiling sha2 v0.10.9
   Compiling five8_const v0.1.4
   Compiling solana-decode-error v2.3.0
   Compiling memchr v2.7.6
   Compiling itoa v1.0.17
   Compiling solana-msg v2.2.1
   Compiling bs58 v0.5.1
   Compiling cpufeatures v0.2.17
   Compiling thiserror v1.0.69
   Compiling solana-program-memory v2.3.1
   Compiling thiserror v2.0.18
   Compiling keccak v0.1.5
   Compiling rustversion v1.0.22
   Compiling borsh-derive-internal v0.10.4
   Compiling borsh-schema-derive-internal v0.10.4
   Compiling unicode-segmentation v1.12.0
   Compiling anyhow v1.0.100
   Compiling solana-program-option v2.2.1
   Compiling byteorder v1.5.0
   Compiling rand_core v0.6.4
   Compiling hashbrown v0.13.2
   Compiling heck v0.3.3
   Compiling base64 v0.22.1
   Compiling feature-probe v0.1.1
   Compiling log v0.4.29
   Compiling bv v0.11.1
   Compiling arrayref v0.3.9
   Compiling shlex v1.3.0
   Compiling find-msvc-tools v0.1.8
   Compiling lazy_static v1.5.0
   Compiling serde_bytes v0.11.19
   Compiling num-modular v0.6.1
   Compiling cc v1.2.54
   Compiling static_assertions v1.1.0
   Compiling arrayvec v0.7.6
   Compiling dashu-base v0.4.1
   Compiling constant_time_eq v0.3.1
   Compiling num-integer v0.1.46
   Compiling num-order v1.2.0
   Compiling memoffset v0.9.1
   Compiling dashu-int v0.4.1
   Compiling paste v1.0.15
   Compiling sha3 v0.10.8
   Compiling foldhash v0.1.5
   Compiling allocator-api2 v0.2.21
   Compiling solana-native-token v2.3.0
   Compiling num-bigint v0.4.6
   Compiling hashbrown v0.15.2
   Compiling solana-big-mod-exp v2.2.1
   Compiling getrandom v0.2.17
   Compiling solana-security-txt v1.1.2
   Compiling num-iter v0.1.45
   Compiling num-complex v0.4.6
   Compiling base64 v0.21.7
   Compiling num-rational v0.4.2
   Compiling keccak-const v0.2.0
   Compiling blake3 v1.8.2
   Compiling dashu-float v0.4.3
   Compiling dashu-ratio v0.4.1
   Compiling num v0.4.3
   Compiling solana-nostd-sha256 v0.1.3
   Compiling sha2-const-stable v0.1.0
   Compiling const-crypto v0.3.0
   Compiling convert_case v0.8.0
   Compiling dashu-macros v0.4.1
   Compiling dashu v0.4.2
   Compiling anchor-derive-space v0.32.1
   Compiling serde_derive v1.0.228
   Compiling bytemuck_derive v1.10.2
   Compiling borsh-derive v1.6.0
   Compiling thiserror-impl v1.0.69
   Compiling thiserror-impl v2.0.18
   Compiling solana-sdk-macro v2.2.1
   Compiling num-derive v0.4.2
   Compiling zeroize_derive v1.4.3
   Compiling spl-program-error-derive v0.5.0
   Compiling num_enum_derive v0.7.5
   Compiling zeroize v1.8.2
   Compiling merlin v3.0.0
   Compiling spl-discriminator-syn v0.2.1
   Compiling solana-secp256k1-recover v2.2.1
   Compiling bytemuck v1.24.0
   Compiling spl-discriminator-derive v0.2.0
   Compiling solana-curve25519 v2.3.13
   Compiling solana-bn254 v2.2.2
   Compiling solana-alt-bn128-bls v0.1.0
   Compiling num_enum v0.7.5
   Compiling toml v0.5.11
   Compiling anchor-syn v0.32.1
   Compiling anchor-lang-idl-spec v0.1.0
   Compiling arcis-interface v0.6.3
   Compiling solana-hash v2.3.0
   Compiling bincode v1.3.3
   Compiling solana-fee-calculator v2.2.1
   Compiling solana-sha256-hasher v2.3.0
   Compiling solana-short-vec v2.2.1
   Compiling solana-serde-varint v2.2.2
   Compiling solana-blake3-hasher v2.2.1
   Compiling solana-keccak-hasher v2.2.1
   Compiling anchor-lang-idl v0.1.2
   Compiling proc-macro-crate v0.1.5
   Compiling arcium-macros v0.6.3
   Compiling borsh-derive v0.10.4
   Compiling borsh v0.10.4
   Compiling solana-pubkey v2.4.0
   Compiling solana-borsh v2.2.1
   Compiling solana-instruction v2.3.3
   Compiling solana-sdk-ids v2.2.1
   Compiling solana-nonce v2.2.1
   Compiling solana-sysvar-id v2.2.1
   Compiling solana-clock v2.2.2
   Compiling solana-rent v2.2.1
   Compiling solana-program-error v2.2.2
   Compiling solana-system-interface v1.0.0
   Compiling solana-stable-layout v2.2.1
   Compiling solana-zk-sdk v2.3.13
   Compiling solana-serialize-utils v2.2.1
   Compiling solana-account-info v2.3.0
   Compiling solana-slot-hashes v2.2.1
   Compiling solana-epoch-schedule v2.2.1
   Compiling solana-cpi v2.2.1
   Compiling solana-program-entrypoint v2.3.0
   Compiling solana-instructions-sysvar v2.2.2
   Compiling solana-stake-interface v1.2.1
   Compiling solana-epoch-rewards v2.2.1
   Compiling solana-slot-history v2.2.1
   Compiling solana-last-restart-slot v2.2.1
   Compiling spl-discriminator v0.4.1
   Compiling solana-program-pack v2.2.1
   Compiling spl-pod v0.5.1
   Compiling solana-account v2.2.1
   Compiling spl-program-error v0.7.0
   Compiling solana-bincode v2.2.1
   Compiling solana-feature-gate-interface v2.2.2
   Compiling solana-transaction-error v2.2.1
   Compiling solana-vote-interface v2.2.6
   Compiling solana-message v2.4.0
   Compiling spl-type-length-value v0.8.0
   Compiling spl-token-confidential-transfer-proof-extraction v0.3.0
   Compiling solana-sysvar v2.3.0
   Compiling spl-tlv-account-resolution v0.10.0
   Compiling solana-loader-v4-interface v2.2.1
   Compiling solana-loader-v3-interface v5.0.0
   Compiling solana-address-lookup-table-interface v2.2.2
   Compiling solana-loader-v2-interface v2.2.1
   Compiling spl-transfer-hook-interface v0.10.0
   Compiling spl-token v8.0.0
   Compiling spl-elgamal-registry v0.2.0
   Compiling spl-token-metadata-interface v0.7.0
   Compiling spl-token-group-interface v0.6.0
   Compiling spl-token-confidential-transfer-ciphertext-arithmetic v0.3.1
   Compiling spl-memo v6.0.0
   Compiling solana-invoke v0.4.0
   Compiling solana-loader-v3-interface v3.0.0
   Compiling spl-associated-token-account-client v2.0.0
   Compiling spl-token-2022 v8.0.1
   Compiling solana-program v2.3.0
   Compiling anchor-attribute-access-control v0.32.1
   Compiling anchor-derive-accounts v0.32.1
   Compiling anchor-attribute-account v0.32.1
   Compiling anchor-attribute-error v0.32.1
   Compiling anchor-attribute-constant v0.32.1
   Compiling anchor-derive-serde v0.32.1
   Compiling anchor-attribute-event v0.32.1
   Compiling anchor-attribute-program v0.32.1
   Compiling spl-associated-token-account v7.0.0
   Compiling anchor-lang v0.32.1
   Compiling arcium-client v0.6.3
   Compiling anchor-spl v0.32.1
   Compiling arcium-anchor v0.6.3
Error: Function _ZN109_$LT$arcium_client..idl..arcium..utils..Account$u20$as$u20$core..convert..TryFrom$LT$$RF$$u5b$u8$u5d$$GT$$GT$8try_from17ha037aaf1519dcf38E Stack offset of 721512 exceeded max offset of 4096 by 717416 bytes, please minimize large stack variables. Estimated function frame size: 721536 bytes. Exceeding the maximum stack offset may cause undefined behavior during execution.

   Compiling zodiac_liquidity v0.1.0 (/app/programs/zodiac_liquidity)
warning: constant `COMP_DEF_OFFSET_CLEAR_POSITION` is never used
  --> programs/zodiac_liquidity/src/lib.rs:39:7
   |
39 | const COMP_DEF_OFFSET_CLEAR_POSITION: u32 = comp_def_offset("clear_position");
   |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` on by default

warning: `zodiac_liquidity` (lib) generated 1 warning
    Finished `release` profile [optimized] target(s) in 2m 21s
+ curl -L https://github.com/Snaipe/Criterion/releases/download/v2.3.3/criterion-v2.3.3-linux-x86_64.tar.bz2 -o criterion-v2.3.3-linux-x86_64.tar.bz2
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100  661k  100  661k    0     0   943k      0 --:--:-- --:--:-- --:--:--  943k
+ tar --strip-components 1 -jxf criterion-v2.3.3-linux-x86_64.tar.bz2
+ ./platform-tools/rust/bin/rustc --version
+ ./platform-tools/rust/bin/rustc --print sysroot
+ set +e
+ rustup toolchain uninstall solana
info: uninstalling toolchain 'solana'
info: toolchain 'solana' uninstalled
+ set -e
+ rustup toolchain link solana platform-tools/rust
+ exit 0
   Compiling proc-macro2 v1.0.106
   Compiling unicode-ident v1.0.22
   Compiling quote v1.0.44
   Compiling cfg-if v1.0.4
   Compiling version_check v0.9.5
   Compiling typenum v1.19.0
   Compiling libc v0.2.180
   Compiling autocfg v1.5.0
   Compiling subtle v2.6.1
   Compiling equivalent v1.0.2
   Compiling cpufeatures v0.2.17
   Compiling syn v1.0.109
   Compiling zerocopy v0.8.34
   Compiling generic-array v0.14.7
   Compiling serde_core v1.0.228
   Compiling serde v1.0.228
   Compiling num-traits v0.2.19
   Compiling winnow v0.7.14
   Compiling hashbrown v0.16.1
   Compiling syn v2.0.114
   Compiling getrandom v0.2.17
   Compiling rand_core v0.6.4
   Compiling indexmap v2.13.0
   Compiling block-buffer v0.10.4
   Compiling crypto-common v0.1.7
   Compiling digest v0.10.7
   Compiling ahash v0.8.12
   Compiling once_cell v1.21.3
   Compiling toml_parser v1.0.6+spec-1.1.0
   Compiling toml_datetime v0.7.5+spec-1.1.0
   Compiling cfg_aliases v0.2.1
   Compiling borsh v1.6.0
   Compiling memchr v2.7.6
   Compiling toml_edit v0.23.10+spec-1.0.0
   Compiling five8_core v0.1.2
   Compiling zmij v1.0.17
   Compiling five8 v0.2.1
   Compiling semver v1.0.27
   Compiling hashbrown v0.13.2
   Compiling serde_json v1.0.149
   Compiling solana-sanitize v2.2.1
   Compiling proc-macro-crate v3.4.0
   Compiling rustc_version v0.4.1
   Compiling sha2 v0.10.9
   Compiling itoa v1.0.17
   Compiling solana-atomic-u64 v2.2.1
   Compiling curve25519-dalek v4.1.3
   Compiling five8_const v0.1.4
   Compiling solana-decode-error v2.3.0
   Compiling ppv-lite86 v0.2.21
   Compiling bs58 v0.5.1
   Compiling solana-msg v2.2.1
   Compiling either v1.15.0
   Compiling thiserror v2.0.18
   Compiling lazy_static v1.5.0
   Compiling thiserror v1.0.69
   Compiling rand_chacha v0.3.1
   Compiling solana-program-memory v2.3.1
   Compiling num-integer v0.1.46
   Compiling opaque-debug v0.3.1
   Compiling keccak v0.1.5
   Compiling rand v0.8.5
   Compiling borsh-derive-internal v0.10.4
   Compiling borsh-schema-derive-internal v0.10.4
   Compiling num-bigint v0.4.6
   Compiling base64 v0.22.1
   Compiling sha3 v0.10.8
   Compiling inout v0.1.4
   Compiling anyhow v1.0.100
   Compiling cipher v0.4.4
   Compiling percent-encoding v2.3.2
   Compiling fnv v1.0.7
   Compiling rustversion v1.0.22
   Compiling uriparse v0.6.4
   Compiling qstring v0.7.2
   Compiling universal-hash v0.5.1
   Compiling unicode-segmentation v1.12.0
   Compiling derivation-path v0.2.0
   Compiling polyval v0.6.2
   Compiling ctr v0.9.2
   Compiling aes v0.8.4
   Compiling solana-derivation-path v2.2.1
   Compiling serde_derive v1.0.228
   Compiling zeroize_derive v1.4.3
   Compiling bytemuck_derive v1.10.2
   Compiling borsh-derive v1.6.0
   Compiling curve25519-dalek-derive v0.1.1
   Compiling thiserror-impl v2.0.18
   Compiling thiserror-impl v1.0.69
   Compiling zeroize v1.8.2
   Compiling solana-sdk-macro v2.2.1
   Compiling num-derive v0.4.2
   Compiling solana-signature v2.3.0
   Compiling bytemuck v1.24.0
   Compiling pbkdf2 v0.11.0
   Compiling hmac v0.12.1
   Compiling aead v0.5.2
   Compiling solana-program-option v2.2.1
   Compiling byteorder v1.5.0
   Compiling paste v1.0.15
   Compiling toml_write v0.1.2
   Compiling aes-gcm-siv v0.11.1
   Compiling merlin v3.0.0
   Compiling solana-seed-phrase v2.2.1
   Compiling solana-seed-derivable v2.2.1
   Compiling itertools v0.12.1
   Compiling arrayvec v0.7.6
   Compiling crunchy v0.2.4
   Compiling heck v0.3.3
   Compiling arrayref v0.3.9
   Compiling feature-probe v0.1.1
   Compiling log v0.4.29
   Compiling digest v0.9.0
   Compiling bv v0.11.1
   Compiling shlex v1.3.0
   Compiling find-msvc-tools v0.1.8
   Compiling num-modular v0.6.1
   Compiling bitflags v2.10.0
   Compiling getrandom v0.1.16
   Compiling cc v1.2.54
   Compiling libsecp256k1-core v0.2.2
   Compiling spl-discriminator-syn v0.2.1
   Compiling allocator-api2 v0.2.21
   Compiling static_assertions v1.1.0
   Compiling foldhash v0.1.5
   Compiling spl-discriminator-derive v0.2.0
   Compiling hashbrown v0.15.2
   Compiling serde_bytes v0.11.19
   Compiling rand_core v0.5.1
   Compiling libsecp256k1-gen-ecmult v0.2.1
   Compiling libsecp256k1-gen-genmult v0.2.1
   Compiling enum-ordinalize-derive v4.3.2
   Compiling ark-serialize-derive v0.4.2
   Compiling ark-std v0.4.0
   Compiling constant_time_eq v0.3.1
   Compiling libsecp256k1 v0.6.0
   Compiling rand_chacha v0.2.2
   Compiling toml v0.5.11
   Compiling solana-hash v2.3.0
   Compiling bincode v1.3.3
   Compiling serde_spanned v0.6.9
   Compiling solana-sha256-hasher v2.3.0
   Compiling toml_datetime v0.6.11
   Compiling solana-fee-calculator v2.2.1
   Compiling toml_edit v0.22.27
   Compiling blake3 v1.8.2
   Compiling enum-ordinalize v4.3.2
   Compiling ark-serialize v0.4.2
   Compiling solana-short-vec v2.2.1
   Compiling ark-ff-macros v0.4.2
   Compiling ark-serialize-derive v0.5.0
   Compiling derivative v2.2.0
   Compiling proc-macro-crate v0.1.5
   Compiling ark-ff-asm v0.4.2
   Compiling ark-std v0.5.0
   Compiling itertools v0.10.5
   Compiling borsh-derive v0.10.4
   Compiling block-buffer v0.9.0
   Compiling dashu-base v0.4.1
   Compiling ark-serialize v0.5.0
   Compiling sha2 v0.9.9
   Compiling borsh v0.10.4
   Compiling dashu-int v0.4.1
   Compiling solana-curve25519 v2.3.13
   Compiling educe v0.6.0
   Compiling rand v0.7.3
   Compiling solana-pubkey v2.4.0
   Compiling toml v0.8.23
   Compiling solana-instruction v2.3.3
   Compiling solana-sdk-ids v2.2.1
   Compiling solana-sysvar-id v2.2.1
   Compiling solana-program-error v2.2.2
   Compiling solana-transaction-error v2.2.1
   Compiling solana-system-interface v1.0.0
   Compiling solana-account-info v2.3.0
   Compiling solana-clock v2.2.2
   Compiling solana-signer v2.2.1
   Compiling solana-serialize-utils v2.2.1
   Compiling cargo_toml v0.19.2
   Compiling solana-program-entrypoint v2.3.0
   Compiling solana-cpi v2.2.1
   Compiling solana-zk-sdk v2.3.13
   Compiling solana-rent v2.2.1
   Compiling solana-slot-hashes v2.2.1
   Compiling solana-instructions-sysvar v2.2.2
   Compiling solana-stake-interface v1.2.1
   Compiling solana-epoch-rewards v2.2.1
   Compiling solana-slot-history v2.2.1
   Compiling solana-epoch-schedule v2.2.1
   Compiling solana-last-restart-slot v2.2.1
   Compiling spl-discriminator v0.4.1
   Compiling solana-program-pack v2.2.1
   Compiling solana-account v2.2.1
   Compiling solana-bincode v2.2.1
   Compiling solana-stable-layout v2.2.1
   Compiling ark-ff v0.4.2
   Compiling solana-borsh v2.2.1
   Compiling solana-sysvar v2.3.0
   Compiling ark-ff-macros v0.5.0
   Compiling num-order v1.2.0
   Compiling anchor-syn v0.32.1
   Compiling ark-ff-asm v0.5.0
   Compiling spl-program-error-derive v0.5.0
   Compiling itertools v0.13.0
   Compiling aho-corasick v1.1.4
   Compiling memoffset v0.9.1
   Compiling solana-define-syscall v2.3.0
   Compiling regex-syntax v0.8.8
   Compiling base64 v0.12.3
   Compiling ark-ff v0.5.0
   Compiling spl-pod v0.5.1
   Compiling regex-automata v0.4.13
   Compiling spl-type-length-value v0.8.0
   Compiling spl-program-error v0.7.0
   Compiling solana-feature-gate-interface v2.2.2
   Compiling solana-message v2.4.0
   Compiling solana-address-lookup-table-interface v2.2.2
   Compiling solana-nonce v2.2.1
   Compiling ark-poly v0.4.2
   Compiling solana-keccak-hasher v2.2.1
   Compiling anchor-lang-idl-spec v0.1.0
   Compiling solana-serde-varint v2.2.2
   Compiling num_enum_derive v0.7.5
   Compiling solana-native-token v2.3.0
   Compiling solana-vote-interface v2.2.6
   Compiling solana-example-mocks v2.2.1
   Compiling ark-ec v0.4.2
   Compiling solana-secp256k1-recover v2.2.1
   Compiling spl-tlv-account-resolution v0.10.0
   Compiling anchor-lang-idl v0.1.2
   Compiling num_enum v0.7.5
   Compiling regex v1.12.2
   Compiling spl-token-confidential-transfer-proof-extraction v0.3.0
   Compiling dashu-float v0.4.3
   Compiling ark-poly v0.5.0
   Compiling dashu-ratio v0.4.1
   Compiling solana-loader-v3-interface v5.0.0
   Compiling solana-loader-v4-interface v2.2.1
   Compiling solana-loader-v2-interface v2.2.1
   Compiling solana-blake3-hasher v2.2.1
   Compiling solana-big-mod-exp v2.2.1
   Compiling ark-bn254 v0.4.0
   Compiling ark-ec v0.5.0
   Compiling dashu-macros v0.4.1
   Compiling solana-program v2.3.0
   Compiling spl-elgamal-registry v0.2.0
   Compiling anchor-attribute-program v0.32.1
   Compiling spl-transfer-hook-interface v0.10.0
   Compiling spl-token v8.0.0
   Compiling anchor-attribute-account v0.32.1
   Compiling anchor-attribute-event v0.32.1
   Compiling anchor-derive-serde v0.32.1
   Compiling anchor-attribute-constant v0.32.1
   Compiling anchor-attribute-error v0.32.1
   Compiling anchor-attribute-access-control v0.32.1
   Compiling anchor-derive-accounts v0.32.1
   Compiling spl-token-metadata-interface v0.7.0
   Compiling spl-token-group-interface v0.6.0
   Compiling spl-token-confidential-transfer-proof-generation v0.4.1
   Compiling spl-token-confidential-transfer-ciphertext-arithmetic v0.3.1
   Compiling solana-invoke v0.4.0
   Compiling spl-memo v6.0.0
   Compiling solana-loader-v3-interface v3.0.0
   Compiling solana-security-txt v1.1.2
   Compiling anchor-derive-space v0.32.1
   Compiling num-rational v0.4.2
   Compiling num-iter v0.1.45
   Compiling num-complex v0.4.6
   Compiling base64 v0.21.7
   Compiling spl-token-2022 v8.0.1
   Compiling ark-bn254 v0.5.0
   Compiling dashu v0.4.2
   Compiling solana-bn254 v2.2.2
   Compiling anchor-lang v0.32.1
   Compiling spl-associated-token-account-client v2.0.0
   Compiling num v0.4.3
   Compiling solana-nostd-sha256 v0.1.3
   Compiling sha2-const-stable v0.1.0
   Compiling keccak-const v0.2.0
   Compiling arcis-interface v0.6.3
   Compiling convert_case v0.8.0
   Compiling const-crypto v0.3.0
   Compiling arcium-macros v0.6.3
   Compiling solana-alt-bn128-bls v0.1.0
   Compiling arcium-client v0.6.3
   Compiling spl-associated-token-account v7.0.0
   Compiling anchor-spl v0.32.1
   Compiling arcium-anchor v0.6.3
   Compiling zodiac_liquidity v0.1.0 (/app/programs/zodiac_liquidity)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 49.91s
     Running unittests src/lib.rs (/app/target/debug/deps/zodiac_liquidity-dfd1186b3ff6587a)
=== Current Circuit Hashes ===
clear_position: [210,124,207,168,77,182,112,201,75,148,53,30,64,134,100,63,70,6,67,157,162,177,67,163,145,51,140,28,227,70,78,120]
compute_withdrawal: [93,151,57,240,216,120,196,220,186,12,59,157,141,35,36,183,133,157,98,182,169,235,148,236,190,146,3,63,248,255,167,161]
deposit: [39,124,227,45,10,33,47,35,15,67,35,221,130,125,29,9,193,121,136,145,244,97,113,178,233,124,43,169,253,246,27,46]
get_user_position: [200,104,225,147,110,34,216,113,213,9,113,172,221,226,218,238,193,56,23,54,208,61,243,27,77,19,82,249,9,20,15,134]
init_user_position: [249,191,50,167,91,202,15,44,7,67,78,232,136,63,114,168,157,180,124,156,229,78,109,109,76,6,98,171,214,99,22,223]
init_vault: [34,47,14,108,83,73,73,198,46,56,9,91,118,254,156,185,213,204,161,184,94,51,126,21,203,155,4,33,37,181,150,117]
record_lp_tokens: [254,203,93,68,116,72,90,23,174,24,64,89,246,30,60,108,128,88,213,132,3,15,241,110,171,234,9,109,63,45,175,170]
reveal_pending_deposits: [189,4,36,218,72,219,57,11,222,182,99,241,119,163,1,10,115,224,77,68,28,33,199,138,208,244,179,128,3,44,8,84]

=== Verifying catbox.moe hashes ===
init_vault local:  222f0e6c534949c62e38095b76fe9cb9d5cca1b85e337e15cb9b042125b59675
init_vault remote: 222f0e6c534949c62e38095b76fe9cb9d5cca1b85e337e15cb9b042125b59675

match: YES (circuits are identical)

================================================================================
Step 14: Circuit Hash Verification
================================================================================
Clean rebuild: SUCCESS
All circuit hashes match catbox.moe uploads EXACTLY.
init_vault hash: 222f0e6c534949c62e38095b76fe9cb9d5cca1b85e337e15cb9b042125b59675
The issue is NOT with circuits or hashes.

================================================================================
Step 15: Fresh Deploy with New Program Keypair
================================================================================
Strategy: Generate new program keypair, deploy fresh, init fresh MXE + comp defs
Deploying fresh program: 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM
Deploying and initializing MXE...
error: the following required arguments were not provided:
  --program-name <PROGRAM_NAME>

Usage: anchor-0.32.1 deploy --program-name <PROGRAM_NAME> --program-keypair <PROGRAM_KEYPAIR> --provider.wallet <WALLET> [-- <SOLANA_ARGS>...]

For more information, try '--help'.
Error: Command failed with exit code 2: Command { std: "anchor" "deploy" "--program-keypair" "/app/target/deploy/zodiac_liquidity_new.json" "--provider.wallet" "/root/.config/solana/id.json", kill_on_drop: false }
Deploying and initializing MXE...
Deploying cluster: https://devnet.helius-rpc.com/?api-key=REDACTED
Upgrade authority: /root/.config/solana/id.json
Deploying program "zodiac_liquidity"...
Program path: /app/target/deploy/zodiac_liquidity.so...
Program Id: 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM

Signature: 5dh2cb15e4jzhBxSo8UbpKMRr6TC1bBnMrj9LwQ5MJaTp8HqnQjUzxvpzDFic4tQMVZJ4arVEZ6BRupipou7LqVY

Waiting for program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM to be confirmed...
Program confirmed on-chain
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004
. Retrying...
Error: Error creating IDL account: RPC response error -32002: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1004; 4 log messages:
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM invoke [1]
  Program log: AnchorError occurred. Error Code: DeclaredProgramIdMismatch. Error Number: 4100. Error Message: The declared program id does not match the actual program id.
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM consumed 2994 of 400000 compute units
  Program 8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM failed: custom program error: 0x1004

Error: Command failed with exit code 1: Command { std: "anchor" "deploy" "-p" "zodiac_liquidity" "--program-keypair" "/app/target/deploy/zodiac_liquidity_new.json" "--provider.wallet" "/root/.config/solana/id.json", kill_on_drop: false }

## Step 16: Fixed declare_id and Redeployed (Session 2)

### 16.1 - Fixed declare_id mismatch
- Updated declare_id!("8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM") in lib.rs
- Note: `arcium build` / `arcium test` auto-syncs keys to localnet, resetting declare_id
- Must use `arcium build --skip-keys-sync` to preserve devnet ID
- Must use `anchor test` directly (not `arcium test`) to avoid key re-sync

### 16.2 - Rebuilt and upgraded program
- arcium build --skip-keys-sync succeeded
- solana program deploy (upgrade) succeeded: 2H3yRUyeebuQwxEnoC971xhr8TyCArXgUx3x7RKHbRChrqaE16n4t7KgNGSD7KCjkNmuHrTtdWc6PWtuLcbayPMN
- IDL upgraded: 2VJWcNeQBDDtsui3xFNvQmzqaaJXfggxx9HoxxRsnfbc

### 16.3 - Changed init to init_if_needed
- Vault account: init -> init_if_needed (enables retry on abort)
- User position: init -> init_if_needed (enables retry on abort)
- Added anchor-lang feature "init-if-needed" in Cargo.toml
- Rebuilt and re-deployed

### 16.4 - Added retry logic to test
- Added `queueWithRetry()` helper: retries up to 5 times with 3s delay
- Wraps each computation: queue tx -> awaitComputationFinalization -> check tx error
- On abort (tx error), re-queues with new computation offset
- Updated vault creation, user position, deposit, and reveal tests

### 16.5 - Ran fresh devnet test
- Used `anchor test` directly with ARCIUM_CLUSTER_OFFSET=456
- All 7 comp defs initialized FRESH (new program ID = new PDAs):
  - init_vault: 2e9bcTrN...
  - init_user_position: 5f5BBx6P...
  - deposit: qfsPATao...
  - reveal_pending_deposits: 2LuWqXCJ...
  - record_lp_tokens: 3vcu36Az...
  - compute_withdrawal: 4wWKUJMz...
  - get_user_position: oT1ze3zn...
- Vault creation queued: offset 6502449897826611495
- Queue tx: 47jmzgkbTPmSoWRamvTsHFKqmSVXgG8yLgM1ge3bin639FvnztVQTBdchnj3AMVmYbp6VnjabAmRv6EFadoWxRm8
- RESULT: Aborted again (Error 6000)

## Step 17: Deep Analysis of Callback Transaction Data

### 17.1 - Two callback txns analyzed (same computation, two ARX nodes)

TX1: 3Z3yge69Tpaas34GNe4TaesVeWeviwYmWdHZMvTmiZX4eppEdm2mYGLeMBoJQGubnsnoEtuVFoQbpm25mn1RvX8s
TX2: 3ZGQ3wHKsGjr35CziBKYVWN2LxPM6H2wqPeLUNfkXWkaZSbbBKBrazKJFmnSZjCaU3e4kcwuoDvLHNkZYt3WJYHM

Both in same slot: 438405966

### 17.2 - Arcium CallbackComputation instruction data (decoded)

TX1 (node_offset: 743829):
{
  comp_offset: 6502449897826611495,
  node_offset: 743829,
  comp_def_offset: 1845870497,
  mxe_program: "8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM",
  execution_status: Failure {
    Circuit,
    [197,76,128,239,207,53,202,97,166,9,159,167,38,100,21,97,55,254,125,46,229,184,54,98,248,139,189,33,251,65,135,232]
  },
  callback_transaction_index: 0
}

TX2 (node_offset: 45548129):
{
  comp_offset: 6502449897826611495,
  node_offset: 45548129,
  comp_def_offset: 1845870497,
  mxe_program: "8mSTSu9dfoM59eSHu7FquqWGDvzNVXNGyySEZjzGE5EM",
  execution_status: Failure {
    Circuit,
    [49,147,253,104,50,102,124,135,144,58,95,23,22,84,48,146,59,245,139,137,144,115,23,85,185,181,6,111,80,139,166,24]
  },
  callback_transaction_index: 0
}

### 17.3 - ROOT CAUSE IDENTIFIED: Circuit Execution Failure

execution_status = Failure { Circuit, [32 bytes] }

This means:
- ARX nodes DOWNLOADED the circuit successfully (hash verified)
- ARX nodes ATTEMPTED to execute the circuit
- Circuit execution FAILED on both nodes independently
- Different 32-byte payloads per node (node-specific error data)

### 17.4 - Circuit verification

Circuit: init_vault (simplest possible - just encrypt zeros)
File: https://files.catbox.moe/aetojl.arcis (86,368 bytes, HTTP 200)
SHA256 local:  222f0e6c534949c62e38095b76fe9cb9d5cca1b85e337e15cb9b042125b59675
SHA256 remote: 222f0e6c534949c62e38095b76fe9cb9d5cca1b85e337e15cb9b042125b59675
circuit_hash!: 222f0e6c534949c62e38095b76fe9cb9d5cca1b85e337e15cb9b042125b59675
ALL MATCH ✅

Circuit code (trivial):
  pub fn init_vault(mxe: Mxe) -> Enc<Mxe, VaultState> {
      let state = VaultState {
          pending_deposits: 0,
          total_lp_tokens: 0,
          total_deposited: 0,
      };
      mxe.from_arcis(state)
  }

### 17.5 - Conclusion

The failure is at the MPC circuit execution level on cluster 456 ARX nodes.
Even the simplest circuit (encrypt zeros) fails with "Circuit" error.
This is NOT a code/hash/URL issue - it's a cluster infrastructure problem.

Possible causes:
1. Cluster 456 MPC engine version incompatible with arcis 0.6.3 compiled circuits
2. Cluster 456 nodes are degraded/misconfigured
3. Circuit format (.arcis) compiled by our arcium-cli doesn't match cluster expectations

NEXT: Check Arcium Discord for cluster 456 status, or try different arcium-cli version.

## Step 18: Escalation to Arcium Team

Prepared detailed bug report for Arcium Telegram/Discord with:
- Both failed callback tx signatures
- Decoded CallbackComputation instruction data showing Failure { Circuit }
- Circuit verification (SHA256, URL accessibility, hash match)
- Circuit code (trivial init_vault)
- All setup details (versions, cluster, program ID)
- 4 specific questions about Circuit failure, cluster health, format compat, node logs

Status: BLOCKED on Arcium cluster 456 - awaiting response from Arcium devs.
